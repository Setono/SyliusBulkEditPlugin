{# @var \Sylius\Component\Core\Model\ProductInterface[] products #}
{# @var \Sylius\Component\Core\Model\ChannelInterface[] channels #}
{# @var \Sylius\Component\Core\Model\ChannelInterface currentChannel #}

{% extends '@SyliusAdmin/layout.html.twig' %}

{% block title %}{{ 'setono_sylius_bulk_edit.ui.bulk_add_taxons'|trans }} | {{ 'sylius.ui.products'|trans }}{% endblock %}

{% block content %}
    {% form_theme form '@SyliusAdmin/Form/theme.html.twig' %}
    {% include '@SetonoSyliusBulkEditPlugin/admin/bulk_add_to_taxon/index/_header.html.twig' %}

    <div class="ui hidden divider"></div>

    {{ form_start(form, {'action': action, 'attr': {'class': 'ui loadable1 form1', 'novalidate': 'novalidate'}}) }}
        {{ form_errors(form) }}
        <div class="ui segment">
            <h4 class="ui dividing header">{{ 'setono_sylius_bulk_edit.ui.bulk_add_taxons'|trans }}</h4>
            {{ form_row(form.taxons) }}
        </div>

        {{ form_row(form._token) }}

        <button type="submit" class="ui labeled icon primary button">
            <i class="save icon"></i>
            {{ 'sylius.ui.save'|trans }}
        </button>
    {{ form_end(form, {'render_rest': false}) }}

    <div class="ui segment">
        <h4 class="ui dividing header">{{ 'setono_sylius_bulk_edit.ui.existing_taxons'|trans }}</h4>
        <table class="ui stackable very basic celled table">
            <thead>
            <tr>
                <th>{{ 'sylius.ui.image'|trans }}</th>
                <th>{{ 'sylius.ui.product'|trans }}</th>
                <th>{{ 'setono_sylius_bulk_edit.ui.existing_taxons'|trans }}</th>
            </tr>
            </thead>
            <tbody>
            {# @var \Sylius\Component\Core\Model\ProductInterface product #}
            {% for product in products %}
            <tr>
                <td>{% include '@SyliusAdmin/Product/_mainImage.html.twig' with {'product': product, 'filter': 'sylius_admin_product_tiny_thumbnail'} %}</td>
                <td>{{ product.name }}</td>
                <td>
                    <div class="field">
                        <ul>
                            {% for taxon in product.taxons %}
                            <li>
                                {{ taxon.fullname }}
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>
{% endblock %}
